# Python文件变化监控和自动重启工具

这个工具可以监控Python文件的变化，并在检测到变化时自动重启应用程序。

## 功能特点

- 实时监控指定目录下的所有.py文件变化
- 自动重启目标Python脚本
- 支持递归监控子目录
- 优雅的进程终止和重启

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 方法1：使用文件监控器（推荐）

```bash
python file_watcher.py
```

这将启动监控器并自动运行 `main.py`。当你修改任何.py文件时，应用程序会自动重启。

### 方法2：使用Flask内置的热重载

由于你的应用是Flask应用，你也可以直接使用Flask内置的开发服务器热重载功能：

```bash
python main.py
```

Flask的debug模式已经包含了文件变化检测和自动重启功能。

## 自定义配置

如果你想要监控不同的脚本或目录，可以修改 `file_watcher.py` 中的以下参数：

```python
script_to_watch = "your_script.py"  # 要监控的脚本
path_to_watch = "."  # 要监控的目录
```

## 工作原理

1. 使用 `watchdog` 库监控文件系统事件
2. 当检测到.py文件被修改时，终止当前运行的进程
3. 重新启动目标Python脚本
4. 支持Ctrl+C优雅退出

## 注意事项

- 确保在运行监控器之前安装了所需的依赖
- 监控器会递归监控指定目录下的所有子目录
- 在Windows系统上，某些编辑器可能会触发多次文件修改事件

## 故障排除

如果遇到问题，请检查：

1. 是否正确安装了watchdog库
2. 脚本路径是否正确
3. 是否有足够的权限访问目标目录
